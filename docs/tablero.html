<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Banco de Tiempo — Dashboard</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body>

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="wrap between">
      <!-- izquierda -->
      <div class="brand">
        <span class="logo">⏳</span>
        <strong>Banco de Tiempo</strong>
      </div>
      <!-- derecha -->
      <div class="userbar">
        <div class="who">
          <span id="userName">—</span>
          <small id="userHood" class="muted"></small>
        </div>
        <span class="chip"><span id="hdrBalance">0</span> h</span>
        <button id="logoutBtn" class="btn ghost" type="button">Salir</button>
      </div>
    </div>
  </header>

  <main class="layout">
    <!-- Sidebar -->
    <aside class="sidebar card">
      <!-- PERFIL -->
      <div class="who">
        <strong id="sbUserName">—</strong>
        <small id="sbUserHood" class="muted"></small>
      </div>

      <!-- SALDO -->
      <div class="balance-row">
        <span class="chip"><span id="sbHdrBalance">0</span> h</span>
      </div>

      <!-- MOVIMIENTOS -->
      <div class="mini-ledger">
        <h4 class="muted">Movimientos</h4>
        <div id="miniLedger" class="list"></div>
      </div>
    </aside>

    <!-- Contenido principal -->
    <section class="content card">
      <nav class="tabs" role="tablist" aria-label="Secciones del dashboard">
        <button class="tab is-active" data-tab="active"    role="tab" aria-selected="true"  aria-controls="pane-active"    type="button">Activas</button>
        <button class="tab"            data-tab="mine"      role="tab" aria-selected="false" aria-controls="pane-mine"      type="button">Mis ofertas</button>
        <button class="tab"            data-tab="exchanges" role="tab" aria-selected="false" aria-controls="pane-exchanges" type="button">Mis intercambios</button>
        <button class="tab"            data-tab="create"    role="tab" aria-selected="false" aria-controls="pane-create"    type="button">Crear oferta</button>
        <button class="tab"            data-tab="orders"    role="tab" aria-selected="false" aria-controls="pane-orders"    type="button">Gestionar órdenes</button>
        <button class="tab"            data-tab="wallet"    role="tab" aria-selected="false" aria-controls="pane-wallet"    type="button">Billetera</button>
      </nav>

      <div class="tabpanes">
        <div id="pane-active"    role="tabpanel"></div>
        <div id="pane-mine"      role="tabpanel" hidden></div>
        <div id="pane-exchanges" role="tabpanel" hidden></div>

        <!-- CREAR OFERTA -->
        <div id="pane-create" role="tabpanel" hidden>
          <h3>Crear oferta</h3>

          <form id="offerForm" action="javascript:void(0)" autocomplete="on">
            <div class="row">
              <label class="field">
                <span>Título *</span>
                <input id="title" name="title" type="text" placeholder="Ej: Clases de inglés" minlength="3" maxlength="80" required />
              </label>

              <label class="field">
                <span>Duración (min) *</span>
                <input id="minutes" name="minutes" type="number" min="15" step="15" placeholder="15" required />
              </label>
            </div>

            <div class="row">
              <label class="field">
                <span>Categoría</span>
                <input id="category" name="category" type="text" placeholder="Ej: educación, reparaciones…" maxlength="40" />
              </label>

              <label class="field">
                <span>Ubicación</span>
                <input id="location" name="location" type="text" placeholder="Remoto / Barrio / Pista" maxlength="60" />
              </label>
            </div>

            <label class="field">
              <span>Descripción</span>
              <textarea id="desc" name="desc" rows="3" placeholder="Contá qué ofrecés, requisitos, disponibilidad…" maxlength="500"></textarea>
            </label>

            <div class="row end" style="margin-top:.5rem">
              <button id="offerBtn" class="btn primary" type="button">Publicar</button>
            </div>

            <small class="muted">Los campos marcados con * son obligatorios.</small>
          </form>
        </div>

        <div id="pane-orders" role="tabpanel" hidden></div>

        <div id="pane-wallet" role="tabpanel" hidden>
          <h3>Saldo: <span id="walletBalance">0</span> h</h3>
          <div id="ledgerList"></div>
        </div>
      </div>
    </section>
  </main>

  <div id="toast" aria-live="polite"></div>

  <!-- Chat (opcional) -->
  <aside id="chat-panel" class="chat-panel hidden">
    <header class="chat-header">
      <h3>Mensajes</h3>
      <button id="close-chat" type="button">×</button>
    </header>

    <section class="chat-layout">
      <div class="chat-conversations" id="chat-conversations"></div>

      <div class="chat-thread">
        <div id="chat-messages" class="chat-messages"></div>
        <form id="chat-form" autocomplete="off">
          <input id="chat-input" type="text" placeholder="Escribe un mensaje..." maxlength="4000" required />
          <button class="btn" type="submit">Enviar</button>
        </form>
      </div>
    </section>
  </aside>

  <!-- Punto de entrada: SOLO controls.js, que importa dashboard.js adentro -->
  <script type="module" src="./src/controls.js"></script>
</body>
</html>
